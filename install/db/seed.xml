<?xml version="1.0" encoding="utf-8"?>
<!--
- phpMyAdmin XML Dump
- version 4.5.1
- https://www.phpmyadmin.net
-
- Client :  localhost
- Généré le :  Lun 16 Novembre 2015 à 18:57
- Version du serveur :  10.0.21-MariaDB
- Version de PHP :  5.6.15
-->

<pma_xml_export version="1.0" xmlns:pma="http://www.phpmyadmin.net/some_doc_url/">
    <!--
    - Structure schemas
    -->
    <pma:structure_schemas>
        <pma:database name="ProjetS3" collation="utf8_general_ci" charset="utf8">
            <pma:table name="arbitre">
                CREATE TABLE `arbitre` (
                  `id_arbitre` int(11) NOT NULL,
                  `id_categorie` int(11) DEFAULT NULL,
                  `id_typeArbitre` int(11) DEFAULT NULL,
                  PRIMARY KEY (`id_arbitre`),
                  KEY `id_categorie` (`id_categorie`),
                  KEY `id_typeArbitre` (`id_typeArbitre`),
                  CONSTRAINT `arbitre_ibfk_1` FOREIGN KEY (`id_arbitre`) REFERENCES `host` (`id_host`) ON DELETE CASCADE ON UPDATE CASCADE,
                  CONSTRAINT `arbitre_ibfk_2` FOREIGN KEY (`id_categorie`) REFERENCES `categoriearbitre` (`id_categorie`) ON DELETE SET NULL ON UPDATE CASCADE,
                  CONSTRAINT `arbitre_ibfk_3` FOREIGN KEY (`id_typeArbitre`) REFERENCES `typearbitre` (`id_typeArbitre`) ON DELETE SET NULL ON UPDATE CASCADE
                ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
            </pma:table>
            <pma:table name="arbre">
                CREATE TABLE `arbre` (
                  `id_arbre` int(11) NOT NULL AUTO_INCREMENT,
                  `contenu` text NOT NULL,
                  PRIMARY KEY (`id_arbre`)
                ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
            </pma:table>
            <pma:table name="billet">
                CREATE TABLE `billet` (
                  `id_billet` int(11) NOT NULL AUTO_INCREMENT,
                  `prix` double NOT NULL,
                  `id_typeBillet` int(11) DEFAULT NULL,
                  PRIMARY KEY (`id_billet`),
                  KEY `id_typeBillet` (`id_typeBillet`),
                  CONSTRAINT `billet_ibfk_1` FOREIGN KEY (`id_typeBillet`) REFERENCES `typebillet` (`id_typeBillet`) ON DELETE SET NULL ON UPDATE CASCADE
                ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
            </pma:table>
            <pma:table name="categoriearbitre">
                CREATE TABLE `categoriearbitre` (
                  `id_categorie` int(11) NOT NULL AUTO_INCREMENT,
                  `libCategorie` int(11) NOT NULL,
                  PRIMARY KEY (`id_categorie`)
                ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
            </pma:table>
            <pma:table name="competition">
                CREATE TABLE `competition` (
                  `id_competition` int(11) NOT NULL AUTO_INCREMENT,
                  `id_typeCompetition` int(11) DEFAULT NULL,
                  `id_tournoi` int(11) DEFAULT NULL,
                  `id_arbre` int(11) DEFAULT NULL,
                  PRIMARY KEY (`id_competition`),
                  KEY `id_typeCompettion` (`id_typeCompetition`,`id_tournoi`),
                  KEY `id_tournoi` (`id_tournoi`),
                  KEY `id_arbre` (`id_arbre`),
                  CONSTRAINT `competition_ibfk_1` FOREIGN KEY (`id_typeCompetition`) REFERENCES `typecompetition` (`id_typeCompetition`) ON DELETE SET NULL ON UPDATE CASCADE,
                  CONSTRAINT `competition_ibfk_2` FOREIGN KEY (`id_tournoi`) REFERENCES `tournoi` (`id_tournoi`) ON DELETE CASCADE ON UPDATE CASCADE,
                  CONSTRAINT `competition_ibfk_3` FOREIGN KEY (`id_arbre`) REFERENCES `arbre` (`id_arbre`) ON DELETE SET NULL ON UPDATE CASCADE
                ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
            </pma:table>
            <pma:table name="creneau">
                CREATE TABLE `creneau` (
                  `id_creneau` int(11) NOT NULL AUTO_INCREMENT,
                  `name` varchar(20) CHARACTER SET utf8 NOT NULL,
                  `day` date NOT NULL,
                  `hDeb` time NOT NULL,
                  `hFin` time NOT NULL,
                  PRIMARY KEY (`id_creneau`)
                ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
            </pma:table>
            <pma:table name="disponibilite">
                CREATE TABLE `disponibilite` (
                  `id_match` int(11) NOT NULL,
                  `id_billet` int(11) NOT NULL,
                  `nbBilletsDispo` int(11) NOT NULL,
                  `nbBilletsTotal` int(11) NOT NULL,
                  PRIMARY KEY (`id_match`,`id_billet`),
                  KEY `id_billet` (`id_billet`),
                  CONSTRAINT `disponibilite_ibfk_1` FOREIGN KEY (`id_match`) REFERENCES `match` (`id_match`) ON DELETE CASCADE ON UPDATE CASCADE,
                  CONSTRAINT `disponibilite_ibfk_2` FOREIGN KEY (`id_billet`) REFERENCES `billet` (`id_billet`) ON DELETE CASCADE ON UPDATE CASCADE
                ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
            </pma:table>
            <pma:table name="entrainement">
                CREATE TABLE `entrainement` (
                  `id_terrain` int(11) NOT NULL,
                  `id_joueur` int(11) NOT NULL,
                  `id_creneau` int(11) NOT NULL,
                  PRIMARY KEY (`id_terrain`,`id_joueur`,`id_creneau`),
                  KEY `id_terrainEntrainement` (`id_terrain`),
                  KEY `id_joueur` (`id_joueur`),
                  KEY `id_creneau` (`id_creneau`),
                  CONSTRAINT `entrainement_ibfk_2` FOREIGN KEY (`id_creneau`) REFERENCES `creneau` (`id_creneau`) ON DELETE CASCADE ON UPDATE CASCADE,
                  CONSTRAINT `entrainement_ibfk_3` FOREIGN KEY (`id_joueur`) REFERENCES `joueur` (`id_joueur`) ON DELETE CASCADE ON UPDATE CASCADE,
                  CONSTRAINT `entrainement_ibfk_4` FOREIGN KEY (`id_terrain`) REFERENCES `terrain` (`id_terrain`) ON DELETE CASCADE ON UPDATE CASCADE
                ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
            </pma:table>
            <pma:table name="hebergement">
                CREATE TABLE `hebergement` (
                  `id_hebergement` int(11) NOT NULL AUTO_INCREMENT,
                  `nbPlaces` int(11) NOT NULL,
                  `id_hebergeur` int(11) DEFAULT NULL,
                  PRIMARY KEY (`id_hebergement`),
                  KEY `id_hebergeur` (`id_hebergeur`),
                  CONSTRAINT `hebergement_ibfk_1` FOREIGN KEY (`id_hebergeur`) REFERENCES `hebergeur` (`id_hebergeur`) ON DELETE SET NULL ON UPDATE CASCADE
                ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
            </pma:table>
            <pma:table name="hebergeur">
                CREATE TABLE `hebergeur` (
                  `id_hebergeur` int(11) NOT NULL AUTO_INCREMENT,
                  PRIMARY KEY (`id_hebergeur`),
                  KEY `id_hebergeur` (`id_hebergeur`),
                  CONSTRAINT `hebergeur_ibfk_1` FOREIGN KEY (`id_hebergeur`) REFERENCES `user` (`id_user`) ON DELETE CASCADE ON UPDATE CASCADE
                ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
            </pma:table>
            <pma:table name="host">
                CREATE TABLE `host` (
                  `id_host` int(11) NOT NULL,
                  PRIMARY KEY (`id_host`),
                  CONSTRAINT `host_ibfk_1` FOREIGN KEY (`id_host`) REFERENCES `user` (`id_user`) ON DELETE CASCADE ON UPDATE CASCADE
                ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
            </pma:table>
            <pma:table name="jouer">
                CREATE TABLE `jouer` (
                  `id_joueur` int(11) NOT NULL,
                  `id_match` int(11) NOT NULL,
                  `score` tinytext CHARACTER SET utf8 NOT NULL,
                  PRIMARY KEY (`id_joueur`,`id_match`),
                  KEY `id_match` (`id_match`),
                  CONSTRAINT `jouer_ibfk_1` FOREIGN KEY (`id_joueur`) REFERENCES `joueur` (`id_joueur`) ON DELETE CASCADE ON UPDATE CASCADE,
                  CONSTRAINT `jouer_ibfk_2` FOREIGN KEY (`id_match`) REFERENCES `match` (`id_match`) ON DELETE CASCADE ON UPDATE CASCADE
                ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
            </pma:table>
            <pma:table name="joueur">
                CREATE TABLE `joueur` (
                  `id_joueur` int(11) NOT NULL,
                  `classement` varchar(20) CHARACTER SET utf8 NOT NULL,
                  PRIMARY KEY (`id_joueur`),
                  CONSTRAINT `joueur_ibfk_1` FOREIGN KEY (`id_joueur`) REFERENCES `host` (`id_host`) ON DELETE CASCADE ON UPDATE CASCADE
                ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
            </pma:table>
            <pma:table name="match">
                CREATE TABLE `match` (
                  `id_match` int(11) NOT NULL AUTO_INCREMENT,
                  `id_creneau` int(11) NOT NULL,
                  `id_terrain` int(11) NOT NULL,
                  `id_competition` int(11) NOT NULL,
                  PRIMARY KEY (`id_match`),
                  KEY `id_creneau` (`id_creneau`),
                  KEY `id_terrainMatch` (`id_terrain`),
                  KEY `id_competition` (`id_competition`),
                  CONSTRAINT `match_ibfk_1` FOREIGN KEY (`id_creneau`) REFERENCES `creneau` (`id_creneau`) ON DELETE CASCADE ON UPDATE CASCADE,
                  CONSTRAINT `match_ibfk_3` FOREIGN KEY (`id_competition`) REFERENCES `competition` (`id_competition`) ON DELETE CASCADE ON UPDATE CASCADE,
                  CONSTRAINT `match_ibfk_4` FOREIGN KEY (`id_terrain`) REFERENCES `terrain` (`id_terrain`) ON DELETE CASCADE ON UPDATE CASCADE
                ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
            </pma:table>
            <pma:table name="organisateur">
                CREATE TABLE `organisateur` (
                  `id_organisateur` int(11) NOT NULL,
                  PRIMARY KEY (`id_organisateur`),
                  CONSTRAINT `organisateur_ibfk_1` FOREIGN KEY (`id_organisateur`) REFERENCES `user` (`id_user`) ON DELETE CASCADE ON UPDATE CASCADE
                ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
            </pma:table>
            <pma:table name="organiser">
                CREATE TABLE `organiser` (
                  `id_organisateur` int(11) NOT NULL,
                  `id_tournoi` int(11) NOT NULL,
                  PRIMARY KEY (`id_organisateur`,`id_tournoi`),
                  KEY `id_tournoi` (`id_tournoi`),
                  CONSTRAINT `organiser_ibfk_1` FOREIGN KEY (`id_organisateur`) REFERENCES `organisateur` (`id_organisateur`) ON DELETE CASCADE ON UPDATE CASCADE,
                  CONSTRAINT `organiser_ibfk_2` FOREIGN KEY (`id_tournoi`) REFERENCES `tournoi` (`id_tournoi`) ON DELETE CASCADE ON UPDATE CASCADE
                ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
            </pma:table>
            <pma:table name="participation">
                CREATE TABLE `participation` (
                  `id_arbitre` int(11) NOT NULL,
                  `id_match` int(11) NOT NULL,
                  PRIMARY KEY (`id_arbitre`,`id_match`),
                  KEY `id_match` (`id_match`),
                  CONSTRAINT `participation_ibfk_1` FOREIGN KEY (`id_arbitre`) REFERENCES `arbitre` (`id_arbitre`) ON DELETE CASCADE ON UPDATE CASCADE,
                  CONSTRAINT `participation_ibfk_2` FOREIGN KEY (`id_match`) REFERENCES `match` (`id_match`) ON DELETE CASCADE ON UPDATE CASCADE
                ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
            </pma:table>
            <pma:table name="participerCompetition">
                CREATE TABLE `participerCompetition` (
                  `id_joueur` int(11) NOT NULL,
                  `id_competition` int(11) NOT NULL,
                  PRIMARY KEY (`id_joueur`,`id_competition`),
                  KEY `id_competition` (`id_competition`),
                  CONSTRAINT `participerCompetition_ibfk_1` FOREIGN KEY (`id_joueur`) REFERENCES `joueur` (`id_joueur`) ON DELETE CASCADE ON UPDATE CASCADE,
                  CONSTRAINT `participerCompetition_ibfk_2` FOREIGN KEY (`id_competition`) REFERENCES `competition` (`id_competition`) ON DELETE CASCADE ON UPDATE CASCADE
                ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
            </pma:table>
            <pma:table name="participerTournoi">
                CREATE TABLE `participerTournoi` (
                  `id_arbitre` int(11) NOT NULL,
                  `id_tournoi` int(11) NOT NULL,
                  PRIMARY KEY (`id_arbitre`,`id_tournoi`),
                  KEY `id_tournoi` (`id_tournoi`),
                  CONSTRAINT `participerTournoi_ibfk_1` FOREIGN KEY (`id_arbitre`) REFERENCES `arbitre` (`id_arbitre`) ON DELETE CASCADE ON UPDATE CASCADE,
                  CONSTRAINT `participerTournoi_ibfk_2` FOREIGN KEY (`id_tournoi`) REFERENCES `tournoi` (`id_tournoi`) ON DELETE CASCADE ON UPDATE CASCADE
                ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
            </pma:table>
            <pma:table name="reservation">
                CREATE TABLE `reservation` (
                  `id_hebergement` int(11) NOT NULL,
                  `id_tournoi` int(11) NOT NULL,
                  `id_host` int(11) NOT NULL,
                  PRIMARY KEY (`id_hebergement`,`id_tournoi`,`id_host`),
                  KEY `id_tournoi` (`id_tournoi`),
                  KEY `id_host` (`id_host`),
                  KEY `id_hebergement` (`id_hebergement`),
                  CONSTRAINT `reservation_ibfk_1` FOREIGN KEY (`id_hebergement`) REFERENCES `hebergement` (`id_hebergement`) ON DELETE CASCADE ON UPDATE CASCADE,
                  CONSTRAINT `reservation_ibfk_3` FOREIGN KEY (`id_host`) REFERENCES `host` (`id_host`) ON DELETE CASCADE ON UPDATE CASCADE,
                  CONSTRAINT `reservation_ibfk_4` FOREIGN KEY (`id_tournoi`) REFERENCES `tournoi` (`id_tournoi`) ON DELETE CASCADE ON UPDATE CASCADE
                ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
            </pma:table>
            <pma:table name="staff">
                CREATE TABLE `staff` (
                  `id_staff` int(11) NOT NULL,
                  PRIMARY KEY (`id_staff`),
                  CONSTRAINT `staff_ibfk_1` FOREIGN KEY (`id_staff`) REFERENCES `host` (`id_host`) ON DELETE CASCADE ON UPDATE CASCADE
                ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
            </pma:table>
            <pma:table name="terrain">
                CREATE TABLE `terrain` (
                  `id_terrain` int(11) NOT NULL AUTO_INCREMENT,
                  `name` varchar(30) NOT NULL,
                  `id_typeTerrain` int(11) DEFAULT NULL,
                  PRIMARY KEY (`id_terrain`),
                  KEY `id_typeTerrain` (`id_typeTerrain`),
                  CONSTRAINT `terrain_ibfk_1` FOREIGN KEY (`id_typeTerrain`) REFERENCES `typeterrain` (`id_typeTerrain`) ON DELETE SET NULL ON UPDATE CASCADE
                ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
            </pma:table>
            <pma:table name="tournoi">
                CREATE TABLE `tournoi` (
                  `id_tournoi` int(11) NOT NULL AUTO_INCREMENT,
                  `dateDeb` date NOT NULL,
                  `dateFin` date NOT NULL,
                  PRIMARY KEY (`id_tournoi`)
                ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
            </pma:table>
            <pma:table name="typearbitre">
                CREATE TABLE `typearbitre` (
                  `id_typeArbitre` int(11) NOT NULL AUTO_INCREMENT,
                  `libTypeArbitre` varchar(30) CHARACTER SET utf8 NOT NULL,
                  PRIMARY KEY (`id_typeArbitre`)
                ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
            </pma:table>
            <pma:table name="typebillet">
                CREATE TABLE `typebillet` (
                  `id_typeBillet` int(11) NOT NULL AUTO_INCREMENT,
                  `libTypeBillet` varchar(20) CHARACTER SET utf8 NOT NULL,
                  PRIMARY KEY (`id_typeBillet`)
                ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
            </pma:table>
            <pma:table name="typecompetition">
                CREATE TABLE `typecompetition` (
                  `id_typeCompetition` int(11) NOT NULL AUTO_INCREMENT,
                  `libType` varchar(20) CHARACTER SET utf8 NOT NULL,
                  PRIMARY KEY (`id_typeCompetition`)
                ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
            </pma:table>
            <pma:table name="typeterrain">
                CREATE TABLE `typeterrain` (
                  `id_typeTerrain` int(11) NOT NULL AUTO_INCREMENT,
                  `libTypeTerrain` varchar(30) CHARACTER SET utf8 NOT NULL,
                  PRIMARY KEY (`id_typeTerrain`)
                ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
            </pma:table>
            <pma:table name="user">
                CREATE TABLE `user` (
                  `id_user` int(11) NOT NULL AUTO_INCREMENT,
                  `login` varchar(20) CHARACTER SET utf8 NOT NULL,
                  `password` varchar(20) CHARACTER SET utf8 NOT NULL,
                  `mail` varchar(20) CHARACTER SET utf8 NOT NULL,
                  `firstName` varchar(30) CHARACTER SET utf8 NOT NULL,
                  `lastName` varchar(30) CHARACTER SET utf8 NOT NULL,
                  PRIMARY KEY (`id_user`),
                  UNIQUE KEY `login` (`login`),
                  UNIQUE KEY `mail` (`mail`)
                ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
            </pma:table>
        </pma:database>
    </pma:structure_schemas>

    <!--
    - Base de données :  'ProjetS3'
    -->
    <database name="ProjetS3">
        <!-- Table arbitre -->
        <!-- Table arbre -->
        <!-- Table billet -->
        <!-- Table categoriearbitre -->
        <!-- Table competition -->
        <!-- Table creneau -->
        <!-- Table disponibilite -->
        <!-- Table entrainement -->
        <!-- Table hebergement -->
        <!-- Table hebergeur -->
        <!-- Table host -->
        <!-- Table jouer -->
        <!-- Table joueur -->
        <!-- Table match -->
        <!-- Table organisateur -->
        <!-- Table organiser -->
        <!-- Table participation -->
        <!-- Table participerCompetition -->
        <!-- Table participerTournoi -->
        <!-- Table reservation -->
        <!-- Table staff -->
        <!-- Table terrain -->
        <!-- Table tournoi -->
        <!-- Table typearbitre -->
        <!-- Table typebillet -->
        <!-- Table typecompetition -->
        <!-- Table typeterrain -->
        <!-- Table user -->
    </database>
</pma_xml_export>